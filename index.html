<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PEEF Rejected 2024</title>

  <style>
    :root{
      --bg:#e9edf3;
      --light:#ffffff;
      --dark:#cfd6e2;
      --primary:#4a5bdc;
      --text:#2f3445;
    }

    body{
      font-family:"Segoe UI", Tahoma, sans-serif;
      font-size:13px;
      background:var(--bg);
      margin:0;
      padding:25px;
      user-select:none;
      color:var(--text);
      position:relative;
    }

    h2{
      text-align:center;
      color:var(--primary);
      margin-bottom:18px;
      letter-spacing:.4px;
    }

    #searchBox{
      width:60%;
      padding:12px 14px;
      margin:0 auto 15px;
      display:block;
      border:none;
      border-radius:14px;
      background:var(--bg);
      outline:none;
      box-shadow:
        inset 4px 4px 8px var(--dark),
        inset -4px -4px 8px var(--light);
    }

    #suggestions{
      width:60%;
      margin:0 auto 15px;
      background:var(--bg);
      border-radius:14px;
      display:none;
      position:relative;
      z-index:10;
      max-height:200px;
      overflow-y:auto;
      box-shadow:
        8px 8px 18px var(--dark),
        -8px -8px 18px var(--light);
    }

    #suggestions div{
      padding:9px 12px;
      cursor:pointer;
    }

    #suggestions div:hover{
      background:#eef1f8;
    }

    table{
      width:100%;
      border-collapse:separate;
      border-spacing:0;
      margin-top:20px;
      background:var(--bg);
      border-radius:16px;
      overflow:hidden;
      box-shadow:
        8px 8px 18px var(--dark),
        -8px -8px 18px var(--light);
    }

    th, td{
      padding:9px 6px;
      text-align:left;
    }

    th{
      color:var(--primary);
      font-weight:600;
    }

    tbody tr:hover td{
      background:#eef1f8;
    }

    #watermark{
      position:fixed;
      top:0;
      left:0;
      width:100%;
      height:100%;
      pointer-events:none;
      background-image:repeating-linear-gradient(
        rgba(74,91,220,0.08) 0,
        rgba(74,91,220,0.08) 1px,
        transparent 1px,
        transparent 200px
      );
    }

    #watermark::before{
      content:"Confidential â€¢ For Students Information Only";
      position:absolute;
      top:20%;
      left:50%;
      transform:translate(-50%,-50%) rotate(-30deg);
      font-size:40px;
      color:rgba(74,91,220,0.15);
      white-space:nowrap;
    }
  </style>
</head>

<body oncontextmenu="return false">

  <h2>PEEF Rejected Applications 2024</h2>

  <input type="text" id="searchBox" placeholder="Type Student Name or Father Name...">
  <div id="suggestions"></div>

  <div id="watermark"></div>

  <table id="dataTable">
    <thead>
      <tr>
        <th>Serial</th>
        <th>Student Name</th>
        <th>Father Name</th>
        <th>Address</th>
        <th>Remarks</th>
        <th>Marks</th>
        <th>Class</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>

  <script>
    document.addEventListener('copy', e => e.preventDefault());
    document.addEventListener('selectstart', e => e.preventDefault());

    const searchBox = document.getElementById('searchBox');
    const suggestions = document.getElementById('suggestions');
    const tableBody = document.getElementById('tableBody');

    let data = [];
    let rows = [];

    fetch('data.csv')
      .then(response => response.text())
      .then(text => {
        const lines = text.trim().split('\n');
        for (let i = 1; i < lines.length; i++) {
          const [serial, student, father, address, remarks, marks, className] = lines[i].split(',');
          data.push({ serial, student, father, address, remarks, marks, className });
        }

        tableBody.innerHTML = data.map(item => `
          <tr style="display:none">
            <td>${item.serial}</td>
            <td>${item.student}</td>
            <td>${item.father}</td>
            <td>${item.address}</td>
            <td>${item.remarks}</td>
            <td>${item.marks}</td>
            <td>${item.className}</td>
          </tr>
        `).join('');

        rows = Array.from(tableBody.querySelectorAll('tr'));
      });

    searchBox.addEventListener('input', function(){
      const query = this.value.toLowerCase().trim();
      suggestions.innerHTML = '';
      suggestions.style.display = 'none';
      rows.forEach(r => r.style.display = 'none');

      if(!query) return;

      const matches = data.filter(item =>
        item.student.toLowerCase().includes(query) ||
        item.father.toLowerCase().includes(query)
      );

      if(!matches.length) return;

      matches.slice(0,8).forEach(item => {
        const div = document.createElement('div');
        div.textContent = `${item.student} (Father: ${item.father})`;
        div.onclick = () => {
          searchBox.value = item.student;
          suggestions.style.display = 'none';
          rows.forEach(row => {
            const s = row.cells[1].textContent.toLowerCase();
            const f = row.cells[2].textContent.toLowerCase();
            row.style.display = (s === item.student.toLowerCase() && f === item.father.toLowerCase()) ? '' : 'none';
          });
        };
        suggestions.appendChild(div);
      });

      suggestions.style.display = 'block';
    });
  </script>

</body>
</html>
